# 탭탭 페어즈 (사천성) - 게임 스펙

## 개요
마작 패 대신 **이모지 카드**를 사용하는 사천성 규칙 기반 타일 매칭 퍼즐 게임

---

## 카드 구성

- 마작 패 대신 **카드** 형태를 사용한다.
- 카드의 그림은 **이모지**로 표현한다.
- 같은 이모지 카드는 **4장씩** 존재한다 (2쌍).
- 보드 크기에 따라 이모지 종류 수를 조절한다.

---

## 매칭 규칙

### 기본 조건
1. **같은 이모지** 카드 2장을 선택한다.
2. 두 카드를 연결하는 경로는 **최대 3개의 직선** (꺾임 횟수 ≤ 2)으로 이루어져야 한다.
3. 경로 상에 **다른 카드가 없어야** 한다.
4. **제한 시간** 내에 모든 카드를 제거해야 승리한다.
5. 카드를 맞추면 **제한 시간**이 **1초**씩 추가된다.

### 연결 경로 패턴

| 꺾임 | 형태 | 설명 |
|:----:|:----:|------|
| 0번 | 직선 | 일직선상에 장애물 없음 |
| 1번 | ㄱ자 | 한 번 꺾어서 연결 |
| 2번 | ㄷ/Z자 | 두 번 꺾어서 연결 |

> ❌ 3번 이상 꺾어야 하는 경우 매칭 불가

### 보드 바깥 경로
- 보드의 **바깥 빈 공간**을 통한 경로 연결이 **허용**된다.

### 경로 시각화
- 두 카드가 매칭될 때 **연결 경로를 선으로 표시**한다.

---

## 스테이지 시스템

- 게임은 **스테이지 1부터 N 스테이지**까지 구성된다.
- 각 스테이지마다 **카드 배치 모양**과 **제한 시간**이 다르다.
- 카드 배치 모양은 사각형 외에 **특수한 모양** (십자형, L자형 등)이 될 수 있다.
- 플레이어는 **1 스테이지부터 순서대로** 진행한다.
- 현재 스테이지를 클리어하면 다음 스테이지로 이동한다.
- **마지막 스테이지(N)를 클리어**하면 승리 메시지가 표시된다.
- 보드 크기는 스테이지가 올라갈수록 커질 수 있으며 **최대 30×30**이다.
- **초기 구현**: 스테이지 1 = **6×4** 사각형 배치

---

## 승리 / 패배 조건

| 결과 | 조건 |
|------|------|
| **스테이지 클리어** | 보드 위의 모든 카드를 제거 |
| **게임 클리어 (승리)** | 마지막 스테이지(N)까지 모두 클리어 |
| **패배 (시간 초과)** | 제한 시간 초과 → **스테이지 1부터 다시 시작** |
| **매칭 불가** | 매칭 가능한 쌍이 없음 → **현재 배치 그대로 카드를 뒤섞음 (자동 셔플)** |

---

## 보조 기능

- **힌트**: 현재 매칭 가능한 쌍 하나를 표시
- **셔플**: 남은 카드를 현재 배치 위치 그대로 뒤섞음

### 보유량 규칙
- 게임 시작 시 힌트 **3개**, 셔플 **3개** 지급
- 스테이지 클리어 시 힌트 **+1개**, 셔플 **+1개** 추가 지급
- **최대 보유량**: 힌트 3개, 셔플 3개
